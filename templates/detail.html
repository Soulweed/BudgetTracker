<!DOCTYPE html>
<html>
{% load static %}

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        type="text/css">

        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <link href="{% static 'css/theme.css' %}" rel="stylesheet" type="text/css">
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light">
        <div class="container"> <button class="navbar-toggler navbar-toggler-right border-0" type="button"
                data-toggle="collapse" data-target="#navbar6">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbar6"> <a class="navbar-brand text-primary d-none d-md-block"
                    href="#">
                    <i class="fa d-inline fa-lg fa-circle"></i>
                    <b>Budget Tracker<br></b>
                </a>
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item"> <a class="nav-link" href="#" contenteditable="true">Report</a> </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item"> <a class="nav-link" href="#">Log in</a> </li>
                    <li class="nav-item"> <a class="nav-link text-primary" href="#">Register</a> </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="pt-2">
        <div class="container">
            <div class="row pb-5">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header"> Income </div>
                        <div class="card-body">
                            <form id="income-form" method="POST">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col-md-2">
                                        
                                        <select class="form-control" name="type_income" id="type_income">
                                            <option value="">Type</option>
                                            <option value="salary">Salary</option>
                                            <option value="commision">Commision</option>
                                            <option value="bonus">Bonus</option>
                                            <option value="etc">ETC</option>
                                        </select>

                                    </div>
                                    <div class="px-1 col-md-8">
                                        <input type="text" class="form-control" placeholder="Description" id="text-1"
                                            name="description">
                                    </div>

                                    <div class="col-md-2 pr-2">
                                        <input type="text" class="form-control" placeholder="Amount" id="text-2"
                                            name="amount">
                                    </div>
                                </div>

                                <div class="row pt-2">
                                    <div class="col-md-2 pl-2">
                                        <select class="form-control" name="recurring" id="recurring">
                                            <option value=0>No recurr</option>
                                            <option value=1>Every Month</option>
                                            
                                        </select>
                                    </div>
                                    <div class="px-1 col-md-4">
                                        
                                        <!-- <input class="form-control" type="date" id="datepick" name="datepick"> -->
                                        <select class="form-control" name="recurr_date" id="recurr_date">
                                            <option value="0">ON DATE</option>
                                                <option Value="1">1</option>
                                                <option Value="2">2</option>
                                                <option Value="3">3</option>
                                                <option Value="4">4</option>
                                                <option Value="5">5</option>
                                                <option Value="6">6</option>
                                                <option Value="7">7</option>
                                                <option Value="8">8</option>
                                                <option Value="9">9</option>
                                                <option Value="10">10</option>
                                                <option Value="11">11</option>
                                                <option Value="12">12</option>
                                                <option Value="13">13</option>
                                                <option Value="14">14</option>
                                                <option Value="15">15</option>
                                                <option Value="16">16</option>
                                                <option Value="17">17</option>
                                                <option Value="18">18</option>
                                                <option Value="19">19</option>
                                                <option Value="20">20</option>
                                                <option Value="21">21</option>
                                                <option Value="22">22</option>
                                                <option Value="23">23</option>
                                                <option Value="24">24</option>
                                                <option Value="25">25</option>
                                                <option Value="26">26</option>
                                                <option Value="27">27</option>
                                                <option Value="28">28</option>
                                                <option Value="29">29</option>
                                                <option Value="30">30</option>
                                                <option Value="31">31</option>
                                        </select>

                                    </div>
                                    <div class="px-1 col-md-4">
                                        <input type="text" class="form-control" placeholder="How many Times" id="time_recurr"
                                            name="time_recurr">

                                    </div>

                                    <div class="col-md-2 pr-6 text-right">
                                        <button type="submit" class="btn btn-primary" id="add_income">Add Income</button>
                                    </div>
                                </div>

                            </form>

                        </div>
                    </div>
                </div>
                <div class="col-md-2"></div>
            </div>
            <div class="row pb-5">

                <div class="col-md-2"></div>
                <div class="col-md-8">
                    <div class="card">


                        <div class="card-header"> Expense </div>
                        <div class="card-body">

                            <form id="expense-form" method="POST">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col-md-2">
                                        
                                        <select class="form-control" name="type_expense" id="type_expense">
                                            <option value="">Type</option>
                                            <option value="food">Food</option>
                                            <option value="travel">Travel</option>
                                            <option value="transport">Transport</option>
                                            <option value="etc">ETC</option>
                                        </select>

                                    </div>
                                    <div class="px-1 col-md-8">
                                        <input type="text" class="form-control" placeholder="Description" id="text-4"
                                            name="description4">
                                    </div>

                                    <div class="col-md-2 pr-2">
                                        <input type="text" class="form-control" placeholder="Amount" id="text-5"
                                            name="amount5">
                                    </div>
                                </div>

                                <div class="row pt-2">
                                    <div class="col-md-3 pl-2">
                                        <!-- <select class="form-control" name="recurring" id="recurring">
                                            <option value=0>NO Recurring</option>
                                            <option value=1>Every Month</option>
                                            
                                        </select> -->
                                    </div>
                                    <div class="px-1 col-md-3">
<!--                                         
                                        <input class="form-control" type="date" id="datepick" name="datepick"> -->

                                    </div>

                                    <div class="col-md-6 pr-6 text-right">
                                        <button type="submit" class="btn btn-primary" id="add_expense">Add Expense</button>
                                    </div>

                                    

                                </div>

                            </form>
                            
                        </div>




                    </div>
                </div>
                <div class="col-md-2"></div>
            </div>
        </div>
    </div>
    
    <div class="pb-5">
        <div class="container">
            <hr>
            <div class="row mb-5">
                <div class="col-md-12 text-center">
                    <h4> Income Chart </h4>
                    <div id="piechart" ></div>

                </div>
            </div>
            <hr>
            <div class="row mt-4"></div>
                <div class="col-md-12 text-center">
                    <h4> Expense Chart </h4>
                    <div id="piechart2"></div>

                </div>
            </div>
        </div>
    </div>
    <div class="py-5">
        <div class="container">
            <div class="row">
                <input type="hidden" id="data_parameter_balance" value='{{ balance }}'>

                <div class="col-md-12 text-center">
                    <h1 class="display-4"> NetBalance : {{ balance }} </h1>
                </div>
            </div>
        </div>
    </div>

    <input type="hidden" id="data_parameter" value='{{ income }}'>
    <input type="hidden" id="data_parameter_expense" value='{{ expense }}'>
    

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>

    <script type="text/javascript">

        var odata = document.getElementById('data_parameter').value;
        var data = odata.replace(/'/g, '"');
        var obj = JSON.parse(data);
        var keys = Object.keys(obj)

        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart_income);
  
        function drawChart_income() {
            var obj_value = [['INCOME', 'Bath']]
            for(let i = 0; i< keys.length;i++){

                //console.log(obj[i])
                
                obj_value.push([ keys[i], obj[keys[i]]])

            }
            console.log(obj_value)
          var data = google.visualization.arrayToDataTable(
            
            obj_value

          );
  
          var options = {
            title: 'My Daily Activities',
            chartArea:{left:100,top:0,width:'100%',height:'150%'}
          };
  
          var chart = new google.visualization.PieChart(document.getElementById('piechart'));
  
          chart.draw(data, options);
        };

        
        google.charts.setOnLoadCallback(drawChart_expense);
        
        var odata_2 = document.getElementById('data_parameter_expense').value;
        var data_2 = odata_2.replace(/'/g, '"');
        var obj_2 = JSON.parse(data_2);
        var keys_2 = Object.keys(obj_2)
        function drawChart_expense() {
  
            var obj_value_2 = [['EXPENSE', 'Bath']]
            for(let i = 0; i< keys_2.length;i++){

                //console.log(obj[i])
                
                obj_value_2.push([ keys_2[i], obj_2[keys_2[i]]])

            }
            console.log(obj_value_2)
          var data = google.visualization.arrayToDataTable(
            
            obj_value_2

          );
            var options = {
              title: 'My Daily Activities',
              chartArea:{left:100,top:0,width:'100%',height:'150%'}
            };
    
            var chart = new google.visualization.PieChart(document.getElementById('piechart2'));
    
            chart.draw(data, options);
          }
      
      
        </script>


</body>

</html>